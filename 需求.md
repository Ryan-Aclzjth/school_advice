学生建议反馈系统 - 项目需求文档 (PRD)

1. 项目概述
1.1. 项目背景与目标
为了搭建一个高效、透明、开放的学生与学校之间的沟通桥梁，我们计划开发一个现代化的在线建议反馈系统。学生可以便捷地提交对学校各项事务（如教学、后勤、设施、活动等）的建议或反馈。学校管理人员可以通过专属后台对建议进行审核、指派、处理和回复，并通过数据分析持续改进校园管理与服务质量。

1.2. 目标用户
学生用户: 在校学生，是建议的主要提出者。

管理员用户: 学校各级、各职能部门的教职工或管理人员，负责审核、处理和回应建议。

1.3. 核心价值
降低反馈门槛: 无需登录，随时随地提交建议，鼓励参与。

确保内容质量: 后台审核机制可过滤无效或恶意信息，保证公开内容的价值。

精准分发问题: 学生可直接选择相关部门，问题自动流转给对应负责人。

精细化管理: 多层级的管理员权限确保了信息安全和责任明确。

数据驱动决策: 通过数据统计与分析，为学校的管理决策提供数据支持。

2. 技术栈选型
后端: Go 语言 + Gin 框架

数据库: SQLite (轻量、易于部署和维护)

前端: React (使用 Create React App 或 Vite 初始化)

UI 框架: Ant Design 或 Material-UI (为了快速实现精美界面)

API 通信: RESTful API，使用 JSON 格式进行数据交换。

管理员认证: JWT (JSON Web Tokens)

3. 用户角色与权限
角色

权限描述

学生 (Student)

- 访问系统，无需登录
- 提交新的建议
- 提交时可选择目标部门
- 提交时可选择填写姓名/班级，或完全匿名
- 提交后获得一个唯一的查询码，用于跟踪建议状态
- 浏览所有已审核通过的公开建议列表
- 对公开的建议进行“点赞”或“支持”
- 查看建议的官方回复

部门管理员 (Department Admin)

- 登录管理后台
- 默认只能查看和处理分配给自己部门的建议
- 对自己部门的建议进行审核、状态变更和回复
- 特殊权限： 可被超级管理员授予“查看全部”权限，从而可以查看所有部门的建议

超级管理员 (Super Admin)

- 拥有部门管理员的所有权限
- 管理账户： 创建、编辑、删除部门管理员账号
- 分配权限： 将部门管理员账户指派到特定部门，并可设置其是否拥有“查看全部”的权限
- 管理配置： 管理建议分类和负责部门
- 查看全站数据统计仪表盘

4. 功能需求 (Functional Requirements)
4.1. 核心实体定义
管理员 (AdminUser)

ID: 唯一标识符 (Primary Key)

Username: 登录用户名 (String, Unique)

PasswordHash: 加密后的密码 (String)

Role: 角色 (String, e.g., "super_admin", "department_admin")

DepartmentID: 所属部门ID (Foreign Key, 对部门管理员有效)

CanViewAll: 是否可查看所有建议 (Boolean, 默认 false)

CreatedAt: 创建时间 (Timestamp)

建议 (Suggestion)

ID: 唯一标识符 (Primary Key)

TrackingCode: 唯一的查询码 (String, e.g., "XYZ123")

Title: 建议标题 (String)

Content: 建议详细内容 (Text)

Category: 建议分类 (String)

DepartmentID: 目标部门ID (Foreign Key)

SubmitterName: 提交者姓名 (String, 可选)

SubmitterClass: 提交者班级 (String, 可选)

Status: 处理状态 (String, e.g., "待审核", "待处理", "处理中", "已解决", "已关闭", "审核不通过")

Upvotes: 点赞/支持数 (Integer)

CreatedAt: 创建时间 (Timestamp)

UpdatedAt: 最后更新时间 (Timestamp)

部门 (Department)

ID: 唯一标识符 (Primary Key)

Name: 部门名称 (String, e.g., "教务处", "后勤保障部")

回复 (Reply)

ID: 唯一标识符 (Primary Key)

SuggestionID: 关联的建议ID (Foreign Key)

Content: 回复内容 (Text)

ReplierID: 回复的管理员ID (Foreign Key, 关联 AdminUser)

CreatedAt: 创建时间 (Timestamp)

4.2. 面向学生的前端
提交与查询页 (Main Page)

页面核心功能是提交建议表单，设计应简洁清晰。

表单包含：标题、内容（富文本编辑器，支持图片上传）、建议分类、目标部门选择器 (必选)。

提供可选的“姓名”和“班级”输入框，并明确告知用户此为选填项。

提交成功后，页面会显示一个唯一的查询码和查询链接，提示用户保存以便后续跟踪。

页面提供一个输入框，让学生可以通过查询码查看特定建议的处理进度和回复。

建议广场 (Suggestions Board)

以卡片流形式展示所有审核通过的建议。

用户可以按部门、分类、状态、热度（点赞数）、时间进行筛选和排序。

提供关键词搜索功能。

每个建议卡片显示：标题、摘要、分类、目标部门、点赞数、当前状态和官方回复。

4.3. 管理后台 (Admin Dashboard)
登录页面

独立的、安全的管理员登录入口。

主仪表盘 (Dashboard)

核心指标: 待审核建议数、待处理建议数等。部门管理员看到的是本部门数据，超级管理员看到的是全站数据。

图表展示: 按部门/分类统计的建议数量等。

建议管理 (Suggestion Management)

审核队列: 默认进入“待审核”列表。部门管理员只能看到提交到本部门的待审核建议。

所有建议列表: 一个功能强大的数据表格。部门管理员默认只看到本部门的建议，除非被授予“查看全部”权限。

操作: 更新状态、添加回复等。

(新增) 管理员管理 (Admin Management) - 仅超级管理员可见

一个用户管理界面，用于创建、编辑和删除部门管理员账号。

在创建/编辑管理员时，可以：

设置用户名和密码。

从下拉列表中选择一个部门进行绑定。

通过一个复选框设置“是否可以查看所有部门的反馈”。

部门与分类管理 (Department & Category Management) - 仅超级管理员可见

允许超级管理员增、删、改负责部门和建议分类。

5. 非功能性需求 (Non-Functional Requirements)
界面设计 (UI/UX)

现代美观: 界面风格简洁、现代化，色彩搭配舒适。

响应式设计: 完美适配桌面、平板和手机端。

交互友好: 动画过渡自然流畅，操作反馈及时明确。

性能 (Performance)

API 响应时间：95%的请求应在 200ms 内完成。

页面加载时间：主要页面首次加载时间应在 3 秒以内。

安全 (Security)

管理员后台的所有 API 接口都需要 JWT 认证和权限校验。

对所有用户输入进行严格的防 XSS、SQL 注入处理。

管理员密码必须经过哈希加密（如 bcrypt）后存储。

防止通过查询码暴力破解访问他人未公开的建议。

可维护性 (Maintainability)

代码规范: 前后端代码风格统一，注释清晰。

模块化: 后端按功能模块（如 handler, model, service）组织代码，前端按组件组织。

API 文档: 提供清晰的 API 文档（可使用 Swagger）。